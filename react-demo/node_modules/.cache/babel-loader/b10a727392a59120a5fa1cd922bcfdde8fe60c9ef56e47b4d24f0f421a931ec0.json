{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shlok\\\\Desktop\\\\react2\\\\react-demo\\\\src\\\\Home.js\",\n  _s = $RefreshSig$();\nimport { Cluster, clusterApiUrl, Connection, PublicKey, Keypair, LAMPORTS_PER_SOL } from \"@solana/web3.js\";\nimport { encodeURL, createQR } from \"@solana/pay\";\nimport BigNumber from \"bignumber.js\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home(_ref, _ref2) {\n  _s();\n  let {\n    amount\n  } = _ref;\n  let {\n    address\n  } = _ref2;\n  const [balance, setBalance] = useState(0);\n  const [txDone, setTxDone] = useState(false);\n  createTxQr({\n    address\n  }, {\n    amount\n  });\n  const ref = useRef(null);\n  async function checkTx() {\n    const balNew = await fetchBalance();\n    console.log(\"checked\", balNew);\n    console.log(\"balance dekhlo\", balance);\n    if (balNew != balance) {\n      setTxDone(true);\n      console.log(\"tx hogaya bro\", balance);\n    }\n  }\n  async function fetchBalance() {\n    const address = \"88JigRuKKTdiH72sCdBPXQRuKDKCHAQBaQTkJ4RMV8yw\";\n    const key = new PublicKey(address);\n    const connection = new Connection(clusterApiUrl(\"devnet\"));\n    const bal = await connection.getBalance(key);\n    return bal / LAMPORTS_PER_SOL;\n  }\n  async function createTxQr(recipientAddr, Amount) {\n    const recipient = new PublicKey(recipientAddr);\n    const amount = new BigNumber(Amount);\n    const reference = new Keypair().publicKey;\n    const label = \"\"; //project name\n    const message = \"\"; //what message on tx ?\n    const memo = \"\"; //project name\n    const url = encodeURL({\n      recipient,\n      amount,\n      reference,\n      label,\n      message,\n      memo\n    });\n    console.log(\"url\", url.href);\n    if (typeof window !== \"undefined\") {\n      const qrCode = createQR(url);\n      qrCode.append(ref.current);\n    }\n    await fetchBalance().then(e => {\n      setBalance(e);\n    });\n    console.log(\"bro bal\", balance);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n_s(Home, \"7vS9Tv3E4YUEaV28ZRJkXux3v2k=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["Cluster","clusterApiUrl","Connection","PublicKey","Keypair","LAMPORTS_PER_SOL","encodeURL","createQR","BigNumber","useEffect","useRef","useState","jsxDEV","_jsxDEV","Home","_ref","_ref2","_s","amount","address","balance","setBalance","txDone","setTxDone","createTxQr","ref","checkTx","balNew","fetchBalance","console","log","key","connection","bal","getBalance","recipientAddr","Amount","recipient","reference","publicKey","label","message","memo","url","href","window","qrCode","append","current","then","e","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Shlok/Desktop/react2/react-demo/src/Home.js"],"sourcesContent":["\r\nimport {\r\n    Cluster,\r\n    clusterApiUrl,\r\n    Connection,\r\n    PublicKey,\r\n    Keypair,\r\n    LAMPORTS_PER_SOL,\r\n} from \"@solana/web3.js\";\r\nimport { encodeURL, createQR } from \"@solana/pay\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\nexport default function Home({amount},{address}) {\r\n    const [balance, setBalance] = useState(0);\r\n    const [txDone, setTxDone] = useState(false);\r\n\r\n    createTxQr({address}, {amount});\r\n\r\n    const ref = useRef(null);\r\n\r\n    async function checkTx() {\r\n        const balNew = await fetchBalance();\r\n        console.log(\"checked\", balNew);\r\n        console.log(\"balance dekhlo\", balance)\r\n        if (balNew != balance) {\r\n            setTxDone(true);\r\n            console.log(\"tx hogaya bro\", balance);\r\n        }\r\n    }\r\n\r\n    async function fetchBalance() {\r\n        const address = \"88JigRuKKTdiH72sCdBPXQRuKDKCHAQBaQTkJ4RMV8yw\";\r\n        const key = new PublicKey(address);\r\n        const connection = new Connection(clusterApiUrl(\"devnet\"));\r\n        const bal = await connection.getBalance(key);\r\n        return bal / LAMPORTS_PER_SOL;\r\n    }\r\n\r\n    async function createTxQr(recipientAddr, Amount) {\r\n        const recipient = new PublicKey(recipientAddr);\r\n        const amount = new BigNumber(Amount);\r\n        const reference = new Keypair().publicKey;\r\n        const label = \"\"; //project name\r\n        const message = \"\"; //what message on tx ?\r\n        const memo = \"\"; //project name\r\n        const url = encodeURL({\r\n            recipient,\r\n            amount,\r\n            reference,\r\n            label,\r\n            message,\r\n            memo,\r\n        });\r\n        console.log(\"url\", url.href);\r\n\r\n        if (typeof window !== \"undefined\") {\r\n            const qrCode = createQR(url);\r\n            qrCode.append(ref.current);\r\n        }\r\n\r\n        await fetchBalance()\r\n        .then((e) => {setBalance(e)})\r\n        \r\n        console.log(\"bro bal\", balance)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div ref={ref} />\r\n        </div>\r\n    );\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}